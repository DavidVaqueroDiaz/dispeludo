<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dise√±o Peludo ‚Äì Personaliza tu comedero</title>

  <!--  FAVICON  -->
  <link rel="icon" type="image/svg+xml" href="Logo.svg" />

  <style>
    :root{
      --verde:#14a34a;
      --beige:#fff4ec;
      --gris:#555;
      --radius:12px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:var(--beige);
      color:#222;
      padding:20px;
    }
    h2{font-size:1.7rem;margin-bottom:16px}
    /* --- GRID LAYOUT --------------------------------------------------- */
    .wrap{
      max-width:1200px;margin:auto;display:grid;gap:24px;
      grid-template-columns:minmax(0,1fr) 360px;
    }
    @media(max-width:920px){
      .wrap{grid-template-columns:1fr}
    }
    /* --- PREVIEW -------------------------------------------------------- */
    .previewBox{
      background:#fff;padding:24px;border-radius:var(--radius);
      box-shadow:0 0 6px rgba(0,0,0,.08)
    }
    .previewBox h3{
      font-size:1.4rem;margin-bottom:12px
    }
    #preview{
      width:100%;aspect-ratio:1/1;border-radius:var(--radius);
      object-fit:contain;background:#fafafa
    }
    /* --- PANEL DERECHA -------------------------------------------------- */
    .panel{
      background:#fff;padding:24px;border-radius:var(--radius);
      box-shadow:0 0 6px rgba(0,0,0,.08);position:sticky;top:20px
    }
    .selector{
      display:flex;justify-content:space-between;margin-bottom:12px
    }
    .selector img{
      width:60px;height:60px;object-fit:contain;border:2px solid #ddd;
      border-radius:var(--radius);cursor:pointer;transition:.2s
    }
    .selector img.activo{border-color:var(--verde)}
    #info{
      background:var(--verde);color:#fff;padding:8px;border-radius:var(--radius);
      font-weight:600;margin-bottom:16px;text-align:center
    }
    /* --- INPUTS & BOTONES ---------------------------------------------- */
    label{display:block;font-weight:600;margin:12px 0 4px}
    input[type=file],input[type=text],input[type=tel]{
      width:100%;padding:10px;border:1px solid #ccc;border-radius:var(--radius);
      font-size:15px
    }
    .btn{
      width:100%;padding:12px;border:none;border-radius:var(--radius);
      font-size:15px;font-weight:600;color:#fff;cursor:pointer;
      background:var(--verde);margin-top:14px
    }
    .btn:hover{filter:brightness(.95)}
    details{margin-top:10px;border:1px solid #f7dcb5;background:#fff8ed;border-radius:var(--radius);padding:12px}
    summary{cursor:pointer;font-weight:600;margin:-12px -12px 8px -12px;padding:12px}
    summary::-webkit-details-marker{display:none}
    .whatsappBox{margin-top:28px;text-align:center;font-size:14px}
    .waBtn{
      display:inline-block;margin-top:8px;padding:10px 28px;background:var(--verde);
      color:#fff;border-radius:var(--radius);text-decoration:none;font-weight:600
    }
  </style>
</head>
<body>

<div class="wrap">
  <!-- ===================  PREVISUALIZACI√ìN  =================== -->
  <div class="previewBox">
    <h3>PREVISUALIZACI√ìN</h3>
    <img id="preview" src="WhatsApp%20Image%202025-05-17%20at%2020.36.18.jpeg.png" alt="Vista previa">
  </div>

  <!-- ===================  PANEL DERECHA  ====================== -->
  <div class="panel">
    <h2>ELIGE TU COMEDERO</h2>

    <div class="selector" id="selector">
      <img src="XL.png" data-size="XL" data-price="√ò22 cm ¬∑ 17 ‚Ç¨"        data-img="perro%20grande.png"   alt="Comedero XL">
      <img src="L.png"  data-size="L"  data-price="√ò19 cm ¬∑ 15 ‚Ç¨"        data-img="perro%20mediano.png" alt="Comedero L">
      <img src="M.png"  data-size="M"  data-price="√ò16 cm ¬∑ 14 ‚Ç¨"        data-img="perro%20peque√±o.png" alt="Comedero M">
      <img src="S.png"  data-size="S"  data-price="√ò11 cm ¬∑ 12 ‚Ç¨"        data-img="gato.png"            alt="Comedero S">
    </div>

    <div id="info">√ò22 cm ¬∑ 17 ‚Ç¨</div>

    <!-- 1. Foto original -->
    <label>1Ô∏è‚É£ Sube tu foto original</label>
    <input type="file" id="fotoOriginal" accept="image/*">

    <!-- Gu√≠a -->
    <details>
      <summary>üìë Gu√≠a para la ilustraci√≥n con IA</summary>
      <p style="font-size:14px;line-height:1.4">
        1. Pulsa el bot√≥n <b>Generar dise√±o con IA</b>.<br>
        2. Elige un estilo (<i>Minimalista</i>, <i>Detallado</i>, <i>Solo la cabeza</i>).<br>
        3. Sube tu foto y descarga la ilustraci√≥n.<br>
        4. Vuelve aqu√≠ y adjunta el archivo en el paso 2.<br>
        5. ¬°Previsualiza y tramita tu pedido!
      </p>
    </details>

    <button class="btn" id="btnIA">üß† Generar dise√±o con IA</button>

    <!-- 2. Ilustraci√≥n IA -->
    <label>2Ô∏è‚É£ Ilustraci√≥n generada (PNG/SVG)</label>
    <input type="file" id="fotoIA" accept=".png,.svg">

    <!-- DATOS -->
    <h3 style="margin-top:24px">Datos del pedido</h3>
    <input type="text" id="nombre"  placeholder="Nombre completo">
    <input type="tel"  id="telefono" placeholder="Tel√©fono (WhatsApp)">

    <button class="btn" id="tramitar">üì¶ Tramitar pedido</button>

    <!-- WhatsApp ayuda -->
    <div class="whatsappBox">
      ¬øTienes alguna duda o no puedes hacer tu dise√±o?<br>
      Escr√≠beme por WhatsApp y lo haremos nosotros.<br>
      <a class="waBtn" href="https://wa.me/34679285964" target="_blank">üü¢ WhatsApp</a>
    </div>
  </div>
</div>

<script>
/* ---------  PREVISUALIZACI√ìN Y SELECTOR  --------- */
const preview   = document.getElementById('preview');
const selector  = document.getElementById('selector');
const info      = document.getElementById('info');

let selected = {
  size : 'XL',
  price: '√ò22 cm ¬∑ 17 ‚Ç¨',
  img  : 'perro%20grande.png'
};

/* marcar XL como activo por defecto */
selector.firstElementChild.classList.add('activo');

/* cambiar preview al elegir comedero */
selector.onclick = e=>{
  if(e.target.tagName!=='IMG') return;
  [...selector.children].forEach(i=>i.classList.remove('activo'));
  e.target.classList.add('activo');

  selected.size  = e.target.dataset.size;
  selected.price = e.target.dataset.price;
  selected.img   = e.target.dataset.img;

  info.textContent = selected.price;
  preview.src      = selected.img;
};

/* --- bot√≥n IA (abre tu GPT en nueva pesta√±a) --- */
document.getElementById('btnIA').onclick=()=>{
  window.open('https://chatgpt.com/g/g-680d11d6dafc819199cd6a3cd71a87cb-ilustra-tu-mascota','_blank');
};

/* --- Tramitar pedido -------------------------------------------------- */
document.getElementById('tramitar').onclick = async ()=>{
  const nombre = document.getElementById('nombre').value.trim();
  const tel    = document.getElementById('telefono').value.trim();

  if(!nombre || !tel){
    alert('Rellena nombre y tel√©fono');
    return;
  }
  const body = { nombre, telefono:tel, size:selected.size };

  try{
    const res = await fetch('/.netlify/functions/tramitar',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(body)
    });
    if(res.ok){
      alert('¬°Pedido recibido! Revisa tu WhatsApp, te enviaremos el boceto final.');
    }else{
      alert('Error al enviar pedido');
    }
  }catch(err){
    alert('Error de conexi√≥n');
  }
};
</script>
</body>
</html>
